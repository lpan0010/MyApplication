

DROP TABLE TABLE_PURCHASE;
DROP TABLE TABLE_ITEM;
DROP TABLE TABLE_TYPE;

DROP SEQUENCE purchase_id_seq;

CREATE TABLE TABLE_ITEM (
	ITEMID VARCHAR2(20) NOT NULL,
	ITEMCO2 NUMBER(6) NOT NULL,
	ITEMPRICE NUMBER(5) NOT NULL,
	ITEMNAME VARCHAR2(20) NOT NULL,
	ITEMTYPEID VARCHAR2(20) NOT NULL);
	ALTER TABLE TABLE_ITEM ADD CONSTRAINT ITEMID_PK PRIMARY KEY (ITEMID);

CREATE TABLE TABLE_PURCHASE (
	PURCHASEID VARCHAR2(20) NOT NULL,
	PURCHASETRIPID VARCHAR2(20) NOT NULL,
	PURCHASEITEMID VARCHAR2(20) NOT NULL,
	PURCHASEQUANTITY NUMBER(4) NOT NULL,
	PURCHASEDATE DATE NOT NULL);
	ALTER TABLE TABLE_PURCHASE ADD CONSTRAINT PURCHASEID_PK PRIMARY KEY (PURCHASEID);

CREATE TABLE TABLE_TYPE (
	TYPEID VARCHAR2(20) NOT NULL,
	TYPENAME VARCHAR2(100) NOT NULL,
	TYPEMESSAGE VARCHAR(200) NOT NULL
    );

ALTER TABLE TABLE_TYPE ADD CONSTRAINT TYPEID_PK PRIMARY KEY(TYPEID);

	ALTER TABLE TABLE_ITEM ADD CONSTRAINT ITEMTYPEID_FK FOREIGN KEY (ITEMTYPEID) REFERENCES TABLE_TYPE(TYPEID);
	ALTER TABLE TABLE_PURCHASE ADD CONSTRAINT PURCHASEITEMID_FK FOREIGN KEY (PURCHASEID) REFERENCES TABLE_ITEM(ITEMID);


INSERT INTO TABLE_TYPE  VALUES (1, 'Meat', 'hi');
INSERT INTO TABLE_TYPE  VALUES (2, 'Dairy', 'hi1');
INSERT INTO TABLE_TYPE  VALUES (3, 'Vegetable', 'hi2');
INSERT INTO TABLE_TYPE  VALUES (4, 'Drink', 'hi3');
INSERT INTO TABLE_TYPE  VALUES (5, 'Confectionary', 'hi4');
INSERT INTO TABLE_TYPE  VALUES (6, 'Other', 'hi5');

INSERT INTO TABLE_ITEM  VALUES ('9300675016902', 20, 2.30, 'Water Bottle', (SELECT TYPEID FROM TABLE_TYPE WHERE TYPENAME =  'Other'));
INSERT INTO TABLE_ITEM  VALUES ('90162800', 15, 3.50, 'Red Bull Sugarfree', (SELECT TYPEID FROM TABLE_TYPE WHERE TYPENAME =  'Drink') );
INSERT INTO TABLE_ITEM  VALUES ('90162602', 17, 3.50, 'Red Bull', (SELECT TYPEID FROM TABLE_TYPE WHERE TYPENAME = 'Drink' ));
INSERT INTO TABLE_ITEM  VALUES ('9348372157405', 12, 0.70, 'Coles Bag', (SELECT TYPEID FROM TABLE_TYPE WHERE TYPENAME = 'Other'));
INSERT INTO TABLE_ITEM  VALUES ('9300650025479', 25, 4.00, 'Oreos', (SELECT TYPEID FROM TABLE_TYPE WHERE TYPENAME = 'Confectionary'));
INSERT INTO TABLE_ITEM  VALUES ('9310072028903', 22, 3.00, 'Shapes', (SELECT TYPEID FROM TABLE_TYPE WHERE TYPENAME = 'Confectionary' ));
INSERT INTO TABLE_ITEM  VALUES ('9310331000442', 30, 1.50, 'Sprinkles', (SELECT TYPEID FROM TABLE_TYPE WHERE TYPENAME = 'Confectionary' ));
INSERT INTO TABLE_ITEM  VALUES ('9300601977321', 18, 1.00, 'Plastic Cups', (SELECT TYPEID FROM TABLE_TYPE WHERE TYPENAME =  'Other' ));
INSERT INTO TABLE_ITEM  VALUES ('9300601977352', 10, 1.50, 'Paper Plates', (SELECT TYPEID FROM TABLE_TYPE WHERE TYPENAME = 'Other' ));
INSERT INTO TABLE_ITEM  VALUES ('9315596002767', 30, 3.50, 'SOLO', (SELECT TYPEID FROM TABLE_TYPE WHERE TYPENAME = 'Drink' ));

CREATE SEQUENCE purchase_id_seq START WITH 100 NOCACHE ORDER;
COMMIT;